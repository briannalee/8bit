(()=>{"use strict";var t={235:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas=void 0;var i=n(490),s=function(){function t(t){var e,n;if(this.environment=t,document.body.style.backgroundColor="black",!(this.canvas=document.createElement("canvas")))throw new Error("Unable to create canvas");if(this.canvas.id="viewport",!(n=document.getElementById("container")))throw new Error("Unable to append canvas to container");if(n.append(this.canvas),!(this.context=this.canvas.getContext("2d")))throw new Error("2d context not supported or canvas already initialized");var s=this;this.canvas.addEventListener("mousedown",(function(t){s.mouseClickEvent(t,s)})),null===(e=document.getElementById("compute"))||void 0===e||e.addEventListener("click",(function(t){(0,i.Compute)(s.environment)})),this.canvas.width=innerWidth,this.canvas.height=innerHeight,this.drawLine()}return t.prototype.getMousePosition=function(t){var e=this.canvas.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}},t.prototype.mouseClickEvent=function(t,e){for(var n=e.getMousePosition(t),i=(n.y,0);i<e.environment.rows;i++){var s=e.environment.spacing,r=e.environment.startY,o=e.environment.startX,a=e.environment.radius;if(n.y>r+i*s&&n.y<e.environment.startY+i*s+s)for(var c=0;c<e.environment.columns;c++)n.x>o-a+c*s&&n.x<e.environment.startX+a+c*s&&e.environment.circles[i][c].switchBit()}},t.prototype.drawLine=function(){this.context.beginPath();var t=this.environment.startY+this.environment.spacing/4+this.environment.rows*this.environment.spacing,e=this.environment.startX-this.environment.radius;this.context.moveTo(e,t),this.context.lineTo(e+this.environment.columns*this.environment.spacing,t),this.context.strokeStyle="white",this.context.stroke(),this.context.closePath()},t.prototype.drawButtons=function(){},t}();e.Canvas=s},50:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var n=function(){function t(t,e,n,i,s){this.x=t,this.y=e,this.set=null!=s&&s,this.radius=n,this.left=t-n,this.top=e-n,this.right=t+n,this.bottom=e+n,this.context=i,this.draw(this.context)}return t.prototype.switchBit=function(){this.set=!this.set,this.draw(this.context)},t.prototype.setBit=function(t){this.set=t,this.draw(this.context)},t.prototype.draw=function(t){t.clearRect(this.left-2,this.top-2,2*this.radius+4,2*this.radius+4),t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle=this.set?"white":"#0f0f0f",t.fill(),t.closePath()},t}();e.Circle=n},911:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.debounce=void 0,e.debounce=function(t,e){var n=void 0;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n||((n={}).promise=new Promise((function(t,e){n.resolve=t,n.reject=e}))),clearTimeout(n.timeout),n.latestArgs=i,n.timeout=setTimeout((function(){var e=n;n=void 0;try{e.resolve(t.apply(void 0,e.latestArgs))}catch(t){e.reject(t)}}),e),n.promise}}},824:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Environment=void 0;var i=n(50),s=n(235);e.Environment=function(t,e){this.columns=null!=t?t:8,this.rows=null!=e?e:2;var n=innerWidth/2/this.columns-10;this.radius=n<10?10:n,this.spacing=2*this.radius+5,this.startX=innerWidth/2+this.radius-10-this.columns*this.spacing/2,this.startY=innerHeight/2-this.radius+10-(this.rows+1)*this.spacing/2,this.circles=new Array(this.rows),this.canvas=new s.Canvas(this),this.results=new Array(this.columns);for(var r=0;r<this.columns;r++)this.results[r]=new i.Circle(this.startX+r*this.spacing,this.startY+this.radius+this.spacing*this.rows+this.spacing/2,this.radius,this.canvas.context);for(var o=0;o<this.rows;o++)for(this.circles[o]=new Array(this.columns),r=0;r<this.columns;r++)this.circles[o][r]=new i.Circle(this.startX+r*this.spacing,this.startY+this.radius+this.spacing*o,this.radius,this.canvas.context)}},490:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Compute=void 0,e.Compute=function(t){for(var e=new Array(t.rows),n=0,i=0;i<t.rows;i++){e[i]=0;for(var s=t.columns-1;s>=0;s--)t.circles[i][s].set&&(e[i]+=Math.pow(2,t.columns-1-s));n+=e[i]}var r=function(t,e){var n=[0];e=null!=e?e:32;for(var i=0;i<e;i++){var s=t&1<<i;n[i]=0===s?0:1}return n}(n),o=0;for(s=t.columns-1;s>=0;s--)t.results[s].setBit(r[o]>0),o++}}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,n),r.exports}(()=>{var t=n(911),e=n(824),i=(0,t.debounce)((function(){null!=document.getElementById("viewport")&&(document.getElementById("viewport").remove(),s())}),200);function s(){new e.Environment}s(),window.addEventListener("resize",(function(t){i()}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdDN0JJQyxFQUEyQixDQUFDLEVBR2hDLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUI5QixJQUFqQitCLEVBQ0gsT0FBT0EsRUFBYUMsUUFHckIsSUFBSUMsRUFBU0wsRUFBeUJFLEdBQVksQ0FHakRFLFFBQVMsQ0FBQyxHQU9YLE9BSEFFLEVBQW9CSixHQUFVRyxFQUFRQSxFQUFPRCxRQUFTSCxHQUcvQ0ksRUFBT0QsT0FDZixDLE1DdEJBLGFBQ0EsU0FHSUcsR0FBdUIsSUFBQUMsV0EwQjNCLFdBQytDLE1BQXZDeEcsU0FBU1EsZUFBZSxjQUN4QlIsU0FBU1EsZUFBZSxZQUFhaUcsU0FDckNDLElBRVIsR0EvQmtELEtBbUJsRCxTQUFTQSxJQUNDLElBQUksRUFBQTNCLFdBQ2QsQ0FiSTJCLElBR0FDLE9BQU85RixpQkFBaUIsVUFBVSxTQUFTQyxHQUN2Q3lGLEdBQ0osRyIsInNvdXJjZXMiOlsid2VicGFjazovLzhiaXQvLi9zcmMvY2FudmFzLnRzIiwid2VicGFjazovLzhiaXQvLi9zcmMvY2lyY2xlLnRzIiwid2VicGFjazovLzhiaXQvLi9zcmMvZGVib3VuY2UudHMiLCJ3ZWJwYWNrOi8vOGJpdC8uL3NyYy9lbnZpcm9ubWVudC50cyIsIndlYnBhY2s6Ly84Yml0Ly4vc3JjL21hdGgudHMiLCJ3ZWJwYWNrOi8vOGJpdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly84Yml0Ly4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVudmlyb25tZW50IH0gZnJvbSBcIi4vZW52aXJvbm1lbnRcIjtcbmltcG9ydCB7IENvbXB1dGUgfSBmcm9tIFwiLi9tYXRoXCI7XG5cbi8qKlxuICogSW50ZXJmYWNlIHRvIGhvbGQgY29vcmRpbmF0ZXMgZm9yIGEgbW91c2UgY2xpY2sgZXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBtb3VzZUNsaWNrIHtcbiAgICB4OiBudW1iZXI7XG4gICAgeTogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgQ2FudmFzIHtcbiAgICAvKipcbiAgICAgKiBDb250YWlucyBpbmZvIGFib3V0IHRoZSBjYW52YXMgRE9NIG9iamVjdFxuICAgICAqL1xuICAgIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gICAgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICAgIGVudmlyb25tZW50OiBFbnZpcm9ubWVudDtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjYW52YXMgdG8gZHJhdyBvbiwgaGFuZGxpbmcgaW5wdXRcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gZW52aXJvbm1lbnQgLSBUaGUgRW52aXJvbm1lbnQgY2xhc3MgdGhhdCBjcmVhdGVkIHRoaXMgY2FudmFzXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZW52aXJvbm1lbnQ6IEVudmlyb25tZW50KSB7XG4gICAgICAgIHRoaXMuZW52aXJvbm1lbnQgPSBlbnZpcm9ubWVudDtcblxuICAgICAgICAvLyBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBibGFja1xuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiYmxhY2tcIjtcblxuICAgICAgICAvLyBDcmVhdGUgY2FudmFzIGFuZCBhcHBlbmQgdG8gcGFnZSwgd2l0aCBlcnJvciBoYW5kbGluZ1xuICAgICAgICBpZiAoISh0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gY3JlYXRlIGNhbnZhc1wiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgSUQgb2YgdGhlIGNhbnZhcywgZm9yIENTUyBzdHlsaW5nXG4gICAgICAgIHRoaXMuY2FudmFzLmlkID0gXCJ2aWV3cG9ydFwiO1xuICAgICAgICBcbiAgICAgICAgLy8gQXBwZW5kIHRoZSBjYW52YXMgdG8gdGhlIGNvbnRhaW5lciBkaXYsIHdpdGggZXJyb3IgaGFuZGxpbmdcbiAgICAgICAgbGV0IGNvbnRhaW5lckRpdjogSFRNTEVsZW1lbnQ7XG4gICAgICAgIGlmICghKGNvbnRhaW5lckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGFpbmVyXCIpISkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBhcHBlbmQgY2FudmFzIHRvIGNvbnRhaW5lclwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb250YWluZXJEaXYuYXBwZW5kKHRoaXMuY2FudmFzKSFcbiAgICAgICAgXG4gICAgICAgIC8vIEdldCBjb250ZXh0LCB3aXRoIGVycm9yIGhhbmRsaW5nXG4gICAgICAgIGlmICghKHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSEpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIyZCBjb250ZXh0IG5vdCBzdXBwb3J0ZWQgb3IgY2FudmFzIGFscmVhZHkgaW5pdGlhbGl6ZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvL0FkZCBpbnB1dCBldmVudCBoYW5kbGluZ1xuICAgICAgICBsZXQgY2xhc3NBY2Nlc3NvciA9IHRoaXM7XG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24oZSlcbiAgICAgICAge1xuICAgICAgICAgICAgY2xhc3NBY2Nlc3Nvci5tb3VzZUNsaWNrRXZlbnQoZSwgY2xhc3NBY2Nlc3Nvcik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tcHV0ZVwiKT8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgQ29tcHV0ZShjbGFzc0FjY2Vzc29yLmVudmlyb25tZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IGlubmVyV2lkdGg7XG4gICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IGlubmVySGVpZ2h0O1xuXG4gICAgICAgIHRoaXMuZHJhd0xpbmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBNb3VzZSBjbGljayBldmVudFxuICAgICAqIEByZXR1cm5zIC0gQ29vcmRpbmF0ZXMgYXMgbW91c2VDbGljayBpbnRlcmZhY2VcbiAgICAgKi9cbiAgICBnZXRNb3VzZVBvc2l0aW9uKGV2ZW50OiBNb3VzZUV2ZW50KSA6IG1vdXNlQ2xpY2sge1xuICAgICAgICBsZXQgcmVjdCA9IHRoaXMuY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBsZXQgeCA9IGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQ7XG4gICAgICAgIGxldCB5ID0gZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wO1xuICAgICAgICByZXR1cm4ge3g6eCwgeTp5fVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVjdHMgd2hpY2ggY2lyY2xlIHdhcyBjbGlja2VkIG9uLCBhbmQgc3dpdGNoZXMgdGhhdCBiaXRcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gZSAtIFRyaWdnZXJpbmcgZXZlbnRcbiAgICAgKiBAcGFyYW0gY2FudmFzIC0gQ2FudmFzIGNsYXNzIHRoYXQgaXMgY3VycmVudGx5IGJlaW5nIHVzZWRcbiAgICAgKi9cbiAgICBtb3VzZUNsaWNrRXZlbnQoZTpNb3VzZUV2ZW50LCBjYW52YXM6Q2FudmFzKSB7XG4gICAgICAgIGxldCBtb3VzZVBvcyA6IG1vdXNlQ2xpY2sgPSBjYW52YXMuZ2V0TW91c2VQb3NpdGlvbihlKTtcbiAgICBcbiAgICAgICAgbGV0IHJvdzpudW1iZXIgPSBtb3VzZVBvcy55XG4gICAgXG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IGNhbnZhcy5lbnZpcm9ubWVudC5yb3dzOyByb3crKykge1xuICAgICAgICAgICAgY29uc3Qgc3BhY2luZyA9IGNhbnZhcy5lbnZpcm9ubWVudC5zcGFjaW5nO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRZID0gY2FudmFzLmVudmlyb25tZW50LnN0YXJ0WTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0WCA9IGNhbnZhcy5lbnZpcm9ubWVudC5zdGFydFg7XG4gICAgICAgICAgICBjb25zdCByYWRpdXMgPSBjYW52YXMuZW52aXJvbm1lbnQucmFkaXVzO1xuICAgICAgICAgICAgaWYgKChtb3VzZVBvcy55ID4gc3RhcnRZK3JvdypzcGFjaW5nICYmIG1vdXNlUG9zLnkgPCAoY2FudmFzLmVudmlyb25tZW50LnN0YXJ0WStyb3cqc3BhY2luZykrc3BhY2luZykpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCBjYW52YXMuZW52aXJvbm1lbnQuY29sdW1uczsgY29sKyspIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICgobW91c2VQb3MueCA+IHN0YXJ0WC1yYWRpdXMrY29sKnNwYWNpbmcgJiYgbW91c2VQb3MueCA8IGNhbnZhcy5lbnZpcm9ubWVudC5zdGFydFgrcmFkaXVzK2NvbCpzcGFjaW5nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmVudmlyb25tZW50LmNpcmNsZXNbcm93XVtjb2xdLnN3aXRjaEJpdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRHJhd3MgdGhlIGRpdmlkZXIgbGluZSBiZXR3ZWVuIHRoZSBudW1iZXJzIGFuZCByZXN1bHRzIGRpc3BsYXlcbiAgICAgKi9cbiAgICBkcmF3TGluZSgpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBjb25zdCB5UG9zIDogbnVtYmVyID0gdGhpcy5lbnZpcm9ubWVudC5zdGFydFkrdGhpcy5lbnZpcm9ubWVudC5zcGFjaW5nLzQrdGhpcy5lbnZpcm9ubWVudC5yb3dzKnRoaXMuZW52aXJvbm1lbnQuc3BhY2luZztcbiAgICAgICAgY29uc3QgeFBvcyA6IG51bWJlciA9IHRoaXMuZW52aXJvbm1lbnQuc3RhcnRYIC0gdGhpcy5lbnZpcm9ubWVudC5yYWRpdXM7XG4gICAgICAgIHRoaXMuY29udGV4dC5tb3ZlVG8oeFBvcywgeVBvcyk7XG4gICAgICAgIHRoaXMuY29udGV4dC5saW5lVG8oeFBvcyArIHRoaXMuZW52aXJvbm1lbnQuY29sdW1ucyp0aGlzLmVudmlyb25tZW50LnNwYWNpbmcsICB5UG9zKTtcbiAgICAgICAgdGhpcy5jb250ZXh0LnN0cm9rZVN0eWxlID0gXCJ3aGl0ZVwiO1xuICAgICAgICB0aGlzLmNvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgIHRoaXMuY29udGV4dC5jbG9zZVBhdGgoKTtcbiAgICB9XG5cbiAgICBkcmF3QnV0dG9ucygpIHtcblxuICAgIH1cbn1cblxuXG5cbiIsImV4cG9ydCBjbGFzcyBDaXJjbGUge1xuICAgIC8qKlxuICAgICAqIENsYXNzIHRoYXQgaG9sZHMgaW5mbyBhYm91dCBhIGNpcmNsZSBkcmF3biBvbiBhbiBIVE1MIGNhbnZhcywgcmVwcmVzZW50aW5nIGEgdmlzdWFsIGJpdCBvZiBkYXRhLlxuICAgICAqL1xuXG4gICAgc2V0OkJvb2xlYW47XG4gICAgeDpudW1iZXI7XG4gICAgeTpudW1iZXI7XG4gICAgcmFkaXVzOm51bWJlcjtcbiAgICBsZWZ0OiBudW1iZXI7XG4gICAgdG9wOiBudW1iZXI7XG4gICAgcmlnaHQ6IG51bWJlcjtcbiAgICBib3R0b206IG51bWJlcjtcbiAgICBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0geCBDZW50ZXJwb2ludCBYIGNvb3JkaW5hdGUgdG8gZHJhdyBjaXJjbGVcbiAgICAgKiBAcGFyYW0geSBDZW50ZXJwb2ludCBZIGNvb3JkaW5hdGUgdG8gZHJhdyBjaXJjbGVcbiAgICAgKiBAcGFyYW0gcmFkaXVzIFJhZGl1cyBvZiBjaXJjbGUgdG8gZHJhd1xuICAgICAqIEBwYXJhbSBjb250ZXh0IENhbnZhcyBjb250ZXh0IHRvIGRyYXcgb25cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih4IDogbnVtYmVyLCB5OiBudW1iZXIsIHJhZGl1czpudW1iZXIsIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRClcbiAgICBjb25zdHJ1Y3Rvcih4IDogbnVtYmVyLCB5OiBudW1iZXIsIHJhZGl1czpudW1iZXIsIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgc2V0PzpCb29sZWFuKSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHRoaXMuc2V0ID0gc2V0ID8/IGZhbHNlO1xuICAgICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cztcbiAgICAgICAgdGhpcy5sZWZ0ID0geC1yYWRpdXM7XG4gICAgICAgIHRoaXMudG9wID0geS1yYWRpdXM7XG4gICAgICAgIHRoaXMucmlnaHQgPSB4K3JhZGl1cztcbiAgICAgICAgdGhpcy5ib3R0b20gPSB5K3JhZGl1cztcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5kcmF3KHRoaXMuY29udGV4dCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3dpdGNoZXMgdGhlIGJpdCB2YWx1ZSBhbmQgcmVkcmF3XG4gICAgICovXG4gICAgc3dpdGNoQml0KCkge1xuICAgICAgICB0aGlzLnNldCA9ICF0aGlzLnNldDtcbiAgICAgICAgdGhpcy5kcmF3KHRoaXMuY29udGV4dCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgYml0IHZhbHVlIGZvciB0aGUgY2lyY2xlIHRvIHRoZSBwcm92aWRlZCBiaXQgYW5kIHJlZHJhd1xuICAgICAqIEBwYXJhbSBiaXQgLSBTZXR0aW5nIHRvIGFwcGx5IHRvIHRoZSBiaXRcbiAgICAgKi9cbiAgICBzZXRCaXQoYml0OiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuc2V0ID0gYml0O1xuICAgICAgICB0aGlzLmRyYXcodGhpcy5jb250ZXh0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEcmF3cyB0aGUgY2lyY2xlXG4gICAgICogQHBhcmFtIGNvbnRleHQgLSBUaGUgY2FudmFzIGNvbnRleHQgdG8gZHJhdyBvblxuICAgICAqL1xuICAgIGRyYXcoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogdm9pZCB7XG4gICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KHRoaXMubGVmdC0yLCB0aGlzLnRvcC0yLCB0aGlzLnJhZGl1cyoyKzQsIHRoaXMucmFkaXVzKjIrNCk7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGNvbnRleHQuYXJjKHRoaXMueCwgdGhpcy55LCB0aGlzLnJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IHRoaXMuc2V0ID8gXCJ3aGl0ZVwiIDogXCIjMGYwZjBmXCI7XG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgIH1cbn0iLCIvKipcbiAqIEludm9rZXMgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGFmdGVyIGEgd2FpdCB0aW1lIGJlZ2lubmluZyBhZnRlciB0aGUgcmV0dXJuIGZ1bmN0aW9uIHN0b3BzIGJlaW5nIGNhbGxlZC5cbiAqIFxuICogQHBhcmFtIGNhbGxiYWNrIC0gRnVuY3Rpb24gdG8gY2FsbCB3aGVuIGRvbmUgZGVib3VuY2luZ1xuICogQHBhcmFtIHdhaXQgLSBXYWl0IHRpbWVcbiAqIEByZXR1cm5zIC0gRnVuY3Rpb24gdG8gYmUgY2FsbGVkIChyZXBlYXRlZGx5KSBieSB0aGUgYWN0aW9uIHRvIGJlIGRlYm91bmNlZCAod2luZG93IHJlc2l6ZSwgZXRjKVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVib3VuY2U8VCBleHRlbmRzIHVua25vd25bXSwgVT4oXG4gICAgY2FsbGJhY2s6ICguLi5hcmdzOiBUKSA9PiBQcm9taXNlTGlrZTxVPiB8IFUsXG4gICAgd2FpdDogbnVtYmVyXG4gICkge1xuICAgIGxldCBzdGF0ZTpcbiAgICAgIHwgdW5kZWZpbmVkXG4gICAgICB8IHtcbiAgICAgICAgICB0aW1lb3V0OiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PlxuICAgICAgICAgIHByb21pc2U6IFByb21pc2U8VT5cbiAgICAgICAgICByZXNvbHZlOiAodmFsdWU6IFUgfCBQcm9taXNlTGlrZTxVPikgPT4gdm9pZFxuICAgICAgICAgIHJlamVjdDogKHZhbHVlOiBhbnkpID0+IHZvaWRcbiAgICAgICAgICBsYXRlc3RBcmdzOiBUXG4gICAgICAgIH0gPSB1bmRlZmluZWRcbiAgXG4gICAgcmV0dXJuICguLi5hcmdzOiBUKTogUHJvbWlzZTxVPiA9PiB7XG4gICAgICBpZiAoIXN0YXRlKSB7XG4gICAgICAgIHN0YXRlID0ge30gYXMgYW55XG4gICAgICAgIHN0YXRlIS5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIHN0YXRlIS5yZXNvbHZlID0gcmVzb2x2ZVxuICAgICAgICAgIHN0YXRlIS5yZWplY3QgPSByZWplY3RcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGNsZWFyVGltZW91dChzdGF0ZSEudGltZW91dClcbiAgICAgIHN0YXRlIS5sYXRlc3RBcmdzID0gYXJnc1xuICAgICAgc3RhdGUhLnRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc3QgcyA9IHN0YXRlIVxuICAgICAgICBzdGF0ZSA9IHVuZGVmaW5lZFxuICAgICAgICB0cnkge1xuICAgICAgICAgIHMucmVzb2x2ZShjYWxsYmFjayguLi5zLmxhdGVzdEFyZ3MpKVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcy5yZWplY3QoZSlcbiAgICAgICAgfVxuICAgICAgfSwgd2FpdClcbiAgXG4gICAgICByZXR1cm4gc3RhdGUhLnByb21pc2VcbiAgICB9XG4gIH0iLCJpbXBvcnQgeyBDaXJjbGUgfSBmcm9tIFwiLi9jaXJjbGVcIjtcbmltcG9ydCB7IENhbnZhcyB9IGZyb20gXCIuL2NhbnZhc1wiO1xuXG5leHBvcnQgY2xhc3MgRW52aXJvbm1lbnQge1xuICAgIC8qKlxuICAgICAqIENvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSB2aXN1YWwgY2FsY3VsYXRvclxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQW4gYXJyYXksIGZpcnN0IGRpbWVuc2lvbiBpcyB0aGUgcm93IChudW1iZXIpLCBzZWNvbmQgZGltZW5zaW9uIGlzIHRoZSBjb2x1bW4gKGJpdClcbiAgICAgKi9cbiAgICBjaXJjbGVzOkNpcmNsZVtdW107XG5cbiAgICAvKipcbiAgICAgKiBBbiBhcnJheSBjb250YWluaW5nIHRoZSBjaXJjbGVzIHRoYXQgYXJlIHVzZWQgZm9yIHRoZSByZXN1bHRzIGRpc3BsYXlcbiAgICAgKi9cbiAgICByZXN1bHRzOkNpcmNsZVtdO1xuXG4gICAgLyoqXG4gICAgICogUmFkaXVzIG9mIHRoZSBjaXJjbGUsIGNvbXB1dGVkIGJhc2VkIG9uIHdpbmRvdyB3aWR0aFxuICAgICAqL1xuICAgIHJhZGl1czpudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBTdGFydGluZyBwb3NpdGlvbiB0byBkcmF3IGNvbHVtbnNcbiAgICAgKi9cbiAgICBzdGFydFg6bnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogU3RhcnRpbmcgcG9zaXRpb24gdG8gZHJhdyByb3dzXG4gICAgICovXG4gICAgc3RhcnRZOm51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIE51bWJlciBvZiBiaXRzIChjb2x1bW5zKSBwZXIgbnVtYmVyXG4gICAgICovXG4gICAgY29sdW1uczpudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBOdW1iZXIgb2YgbnVtYmVycyAocm93cylcbiAgICAgKi9cbiAgICByb3dzOm51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFNwYWNpbmcgaXMgdGhlIHRvdGFsIHNwYWNlIHRoYXQgZWFjaCBjaXJjbGUgdGFrZXMgdXAgd2l0aCBwYWRkaW5nXG4gICAgICovXG4gICAgc3BhY2luZzpudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY2FudmFzIHRvIGRyYXcgb25cbiAgICAgKi9cbiAgICBjYW52YXM6Q2FudmFzO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNhbnZhcyBhbmQgZHJhd3MgY2lyY2xlcyBvbiBpdCB0byByZXByZXNlbnQgKHJvdykgYmluYXJ5IG51bWJlcnMgb2YgKGNvbHVtbnMpIGJpdCBsZW5ndGguXG4gICAgICogQHBhcmFtIGNvbHVtbnMgLSBOdW1iZXIgb2YgY29sdW1ucyAoYml0cylcbiAgICAgKiBAcGFyYW0gcm93cyAtIE51bWJlciBvZiByb3dzIChudW1iZXJzKVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCk7XG4gICAgY29uc3RydWN0b3IoY29sdW1ucz86bnVtYmVyLHJvd3M/Om51bWJlcikge1xuICAgICAgICB0aGlzLmNvbHVtbnMgPSBjb2x1bW5zID8/IDg7XG4gICAgICAgIHRoaXMucm93cyA9IHJvd3MgPz8gMjtcbiAgICAgICAgbGV0IHBhZGRpbmcgOiBudW1iZXIgPSA1O1xuXG4gICAgICAgIC8vIENvbXB1dGUgdGhlIHJhZGl1cyBvZiB0aGUgY2lyY2xlcyB0aGF0IGNhbiBmaXQgaW4gdGhlIHdpbmRvd1xuICAgICAgICBsZXQgZGVzaXJlZFJhZGl1czpudW1iZXIgPSAoaW5uZXJXaWR0aC8yKS90aGlzLmNvbHVtbnMgLSBwYWRkaW5nKjI7XG4gICAgICAgIHRoaXMucmFkaXVzID0gZGVzaXJlZFJhZGl1cyA8IDEwID8gMTAgOiBkZXNpcmVkUmFkaXVzO1xuICAgICAgICB0aGlzLnNwYWNpbmcgPSAodGhpcy5yYWRpdXMqMikrcGFkZGluZztcblxuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIHN0YXJ0aW5nIHBvc2l0aW9uIHRvIGRyYXcgdGhlIGNpcmNsZXNcbiAgICAgICAgdGhpcy5zdGFydFggPSAoaW5uZXJXaWR0aC8yKSt0aGlzLnJhZGl1cy1wYWRkaW5nKjItKHRoaXMuY29sdW1ucyp0aGlzLnNwYWNpbmcpLzI7XG4gICAgICAgIHRoaXMuc3RhcnRZID0gKGlubmVySGVpZ2h0LzIpLXRoaXMucmFkaXVzK3BhZGRpbmcqMi0odGhpcy5yb3dzKzEpKnRoaXMuc3BhY2luZy8yO1xuXG4gICAgICAgIC8vIEluaXQgY2lyY2xlIGFycmF5XG4gICAgICAgIHRoaXMuY2lyY2xlcyA9IG5ldyBBcnJheSh0aGlzLnJvd3MpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBjYW52YXMgdG8gZHJhdyBvblxuICAgICAgICB0aGlzLmNhbnZhcyA9IG5ldyBDYW52YXModGhpcyk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSByZXN1bHRzIGRpc3BsYXlcbiAgICAgICAgdGhpcy5yZXN1bHRzID0gbmV3IEFycmF5KHRoaXMuY29sdW1ucyk7XG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5jb2x1bW5zOyBjKyspIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0c1tjXT0gbmV3IENpcmNsZSh0aGlzLnN0YXJ0WCArIGMgKiB0aGlzLnNwYWNpbmcsdGhpcy5zdGFydFkgKyB0aGlzLnJhZGl1cyArIHRoaXMuc3BhY2luZyp0aGlzLnJvd3MrdGhpcy5zcGFjaW5nLzIsdGhpcy5yYWRpdXMsdGhpcy5jYW52YXMuY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZXMgdGhlIGNpcmNsZXMgZm9yIGVhY2ggcm93IChudW1iZXIpIHdpdGggdGhlIGFtb3VudCBvZiBiaXRzIChjb2x1bW5zKSByZXF1ZXN0ZWQuXG4gICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgdGhpcy5yb3dzOyByKyspIHtcbiAgICAgICAgICAgIHRoaXMuY2lyY2xlc1tyXT1uZXcgQXJyYXkodGhpcy5jb2x1bW5zKTtcbiAgICAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5jb2x1bW5zOyBjKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNpcmNsZXNbcl1bY109IG5ldyBDaXJjbGUodGhpcy5zdGFydFggKyBjICogdGhpcy5zcGFjaW5nLHRoaXMuc3RhcnRZICsgdGhpcy5yYWRpdXMgKyB0aGlzLnNwYWNpbmcqcix0aGlzLnJhZGl1cyx0aGlzLmNhbnZhcy5jb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgeyBFbnZpcm9ubWVudCB9IGZyb20gXCIuL2Vudmlyb25tZW50XCI7XG5cbi8qKlxuICogQ29udmVydHMgYmluYXJ5IHJlcHJlc2VudGF0aW9uIHRvIGRlY2ltYWwsIHBlcmZvcm1zIHRoZSBkZXNpcmVkIG1hdGggZnVuY3Rpb24sIHRoZW4gZGlzcGxheXMgdGhlIHJlc3VsdHMgaW4gYmluYXJ5XG4gKiBAcGFyYW0gZW52IC0gRW52aXJvbm1lbnQgdXNlZCB0byBjb21wdXRlIHZhbHVlc1xuICogXG4gKiBUT0RPOiBBbGxvdyBjaG9vc2luZyBvZiBvcGVyYW5kIChhZGQsc3VidHJhY3QsbXVsdGlwbHksZGl2aWRlKVxuICovXG5leHBvcnQgZnVuY3Rpb24gQ29tcHV0ZShlbnY6IEVudmlyb25tZW50KTogdm9pZCB7XG5cbiAgICAvLyBDb252ZXJ0IHRoZSBiaW5hcnkgY2lyY2xlcyBpbnRvIGEgZGVjaW1hbCBudW1iZXIgZm9yIGVhY2ggcm93XG4gICAgbGV0IGRlY2ltYWw6bnVtYmVyW10gPSBuZXcgQXJyYXkoZW52LnJvd3MpXG4gICAgbGV0IHJlc3VsdHM6bnVtYmVyID0gMDtcbiAgICBmb3IgKGxldCByID0gMDsgciA8IGVudi5yb3dzOyByKyspIHtcbiAgICAgICAgZGVjaW1hbFtyXSA9IDA7XG4gICAgICAgIGZvciAobGV0IGMgPSBlbnYuY29sdW1ucy0xOyBjID49IDA7IGMtLSkge1xuICAgICAgICAgICAgaWYgKGVudi5jaXJjbGVzW3JdW2NdLnNldCkge1xuICAgICAgICAgICAgICAgIGRlY2ltYWxbcl0gKz0gTWF0aC5wb3coMiwgZW52LmNvbHVtbnMtMS1jKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXN1bHRzICs9IGRlY2ltYWxbcl07XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHRoZSByZXN1bHQgY2lyY2xlc1xuICAgIGxldCBiaW5hcnlSZXN1bHQgPSBjb252ZXJ0VG9CaW5hcnkocmVzdWx0cyk7XG4gICAgbGV0IGluZGV4OiBudW1iZXIgPSAwO1xuICAgIGZvciAobGV0IGMgPSBlbnYuY29sdW1ucy0xOyBjID49IDA7IGMtLSkge1xuICAgICAgICBlbnYucmVzdWx0c1tjXS5zZXRCaXQoYmluYXJ5UmVzdWx0W2luZGV4XSA+IDAgPyB0cnVlIDogZmFsc2UpO1xuICAgICAgICBpbmRleCsrO1xuICAgIH1cbn1cblxuLyoqXG4gKiBcbiAqIEBwYXJhbSBudW0gLSBEZWNpbWFsIG51bWJlciB0byBiZSBjb252ZXJ0ZWQgaW50byBiaW5hcnlcbiAqIEBwYXJhbSBiaXRzIC0gTGVuZ3RoIG9mIHJlc3VsdFxuICogQHJldHVybnMgLSBBbiBhcnJheSBjb250YWluaW5nIHRoZSBiaW5hcnkgcmVwcmVzZW50YXRpb24gb2YgdGhlIGRlY2ltYWwgbnVtYmVyXG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnRUb0JpbmFyeShudW0gOiBudW1iZXIsIGJpdHM/OiBudW1iZXIpIDogbnVtYmVyW10ge1xuICAgIGNvbnN0IGFyckJpdHdpc2UgPSBbMF07IC8vIHNhdmUgdGhlIHJlc3VsdGluZyBiaXR3aXNlXG4gICAgYml0cz0gYml0cyA/PyAzMjtcbiAgICBmb3IgKGxldCBpPTA7IGk8Yml0czsgaSsrKSB7XG4gICAgICAgIGxldCBtYXNrID0gMTtcblxuICAgICAgICBjb25zdCBiaXQgPSBudW0gJiAobWFzayA8PCBpKTsgLy8gQW5kIGJpdHdpc2Ugd2l0aCBsZWZ0IHNoaWZ0XG5cbiAgICAgICAgaWYoYml0ID09PSAwKSB7XG4gICAgICAgICAgICBhcnJCaXR3aXNlW2ldID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFyckJpdHdpc2VbaV0gPSAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGFyckJpdHdpc2U7XG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsImltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSBcIi4vZGVib3VuY2VcIjtcbmltcG9ydCB7IEVudmlyb25tZW50IH0gZnJvbSBcIi4vZW52aXJvbm1lbnRcIjtcblxubGV0IGVudjogRW52aXJvbm1lbnQ7XG5sZXQgZGVib3VuY2VXaW5kb3dSZXNpemUgPSBkZWJvdW5jZShEZWxldGVDYW52YXMsIDIwMCk7XG5cbkNyZWF0ZSgpO1xuXG4vKipcbiAqIEhhbmRsZXMgdGhlIGNyZWF0aW9uIG9mIHRoZSBFbnZpcm9ubWVudC4gQWRkcyBhIGhhbmRsZXIgdG8gdGhlIHdpbmRvdyB0aGF0IHdpbGwgcmVjcmVhdGUgdGhlIEVudmlyb25tZW50IHdoZW5ldmVyIHRoZSB3aW5kb3cgaXMgcmVzaXplZC5cbiAqL1xuZnVuY3Rpb24gQ3JlYXRlKCkge1xuICAgIENyZWF0ZUVudmlyb25tZW50KCk7XG5cbiAgICAvLyBEZWJvdW5jZWQgd2luZG93IHJlc2l6ZSBpbnB1dCBoYW5kbGVyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBkZWJvdW5jZVdpbmRvd1Jlc2l6ZSgpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgRW52aXJvbm1lbnRcbiAqL1xuZnVuY3Rpb24gQ3JlYXRlRW52aXJvbm1lbnQoKTogdm9pZCB7XG4gICAgZW52ID0gbmV3IEVudmlyb25tZW50KCk7XG59XG5cbi8qKlxuICogRGVsZXRlcyB0aGUgQ2FudmFzLCBhbmQgY3JlYXRlcyBhIG5ldyBFbnZpcm9ubWVudFxuICovXG5mdW5jdGlvbiBEZWxldGVDYW52YXMoKXtcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWV3cG9ydFwiKSAhPSBudWxsKSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlld3BvcnRcIikhLnJlbW92ZSgpO1xuICAgICAgICBDcmVhdGVFbnZpcm9ubWVudCgpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJlbnZpcm9ubWVudCIsImNvbnRhaW5lckRpdiIsInRoaXMiLCJkb2N1bWVudCIsImJvZHkiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsImNhbnZhcyIsImNyZWF0ZUVsZW1lbnQiLCJFcnJvciIsImlkIiwiZ2V0RWxlbWVudEJ5SWQiLCJhcHBlbmQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImNsYXNzQWNjZXNzb3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsIm1vdXNlQ2xpY2tFdmVudCIsIkNvbXB1dGUiLCJ3aWR0aCIsImlubmVyV2lkdGgiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsImRyYXdMaW5lIiwiZ2V0TW91c2VQb3NpdGlvbiIsImV2ZW50IiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIngiLCJjbGllbnRYIiwibGVmdCIsInkiLCJjbGllbnRZIiwidG9wIiwibW91c2VQb3MiLCJyb3dzIiwic3BhY2luZyIsInN0YXJ0WSIsInN0YXJ0WCIsInJhZGl1cyIsImNvbCIsImNvbHVtbnMiLCJjaXJjbGVzIiwic3dpdGNoQml0IiwiYmVnaW5QYXRoIiwieVBvcyIsInhQb3MiLCJtb3ZlVG8iLCJsaW5lVG8iLCJzdHJva2VTdHlsZSIsInN0cm9rZSIsImNsb3NlUGF0aCIsImRyYXdCdXR0b25zIiwiQ2FudmFzIiwic2V0IiwicmlnaHQiLCJib3R0b20iLCJkcmF3Iiwic2V0Qml0IiwiYml0IiwiY2xlYXJSZWN0IiwiYXJjIiwiTWF0aCIsIlBJIiwiZmlsbFN0eWxlIiwiZmlsbCIsIkNpcmNsZSIsImNhbGxiYWNrIiwid2FpdCIsInN0YXRlIiwidW5kZWZpbmVkIiwicHJvbWlzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiY2xlYXJUaW1lb3V0IiwidGltZW91dCIsImxhdGVzdEFyZ3MiLCJhcmdzIiwic2V0VGltZW91dCIsInMiLCJFbnZpcm9ubWVudCIsImRlc2lyZWRSYWRpdXMiLCJwYWRkaW5nIiwiQXJyYXkiLCJyZXN1bHRzIiwiYyIsInIiLCJlbnYiLCJkZWNpbWFsIiwicG93IiwiYmluYXJ5UmVzdWx0IiwibnVtIiwiYml0cyIsImFyckJpdHdpc2UiLCJpIiwiY29udmVydFRvQmluYXJ5IiwiaW5kZXgiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImRlYm91bmNlV2luZG93UmVzaXplIiwiZGVib3VuY2UiLCJyZW1vdmUiLCJDcmVhdGVFbnZpcm9ubWVudCIsIndpbmRvdyJdLCJzb3VyY2VSb290IjoiIn0=